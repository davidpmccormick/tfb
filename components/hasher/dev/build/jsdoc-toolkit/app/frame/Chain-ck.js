/**@constructor*/function ChainNode(e,t){this.value=e;this.link=t}function Chain(e){this.nodes=[];this.cursor=-1;if(e&&e.length>0){this.push(e[0],"//");for(var t=1,n=e.length;t<n;t+=2)this.push(e[t+1],e[t])}}Chain.prototype.push=function(e,t){this.nodes.length>0&&t?this.nodes.push(new ChainNode(e,t)):this.nodes.push(new ChainNode(e))};Chain.prototype.unshift=function(e,t){this.nodes.length>0&&t&&(this.nodes[0].link=t);this.nodes.unshift(new ChainNode(e));this.cursor++};Chain.prototype.get=function(){return this.cursor<0||this.cursor>this.nodes.length-1?null:this.nodes[this.cursor]};Chain.prototype.first=function(){this.cursor=0;return this.get()};Chain.prototype.last=function(){this.cursor=this.nodes.length-1;return this.get()};Chain.prototype.next=function(){this.cursor++;return this.get()};Chain.prototype.prev=function(){this.cursor--;return this.get()};Chain.prototype.toString=function(){var e="";for(var t=0,n=this.nodes.length;t<n;t++){this.nodes[t].link&&(e+=" -("+this.nodes[t].link+")-> ");e+=this.nodes[t].value.toString()}return e};Chain.prototype.joinLeft=function(){var e="";for(var t=0,n=this.cursor;t<n;t++){e&&this.nodes[t].link&&(e+=this.nodes[t].link);e+=this.nodes[t].value.toString()}return e};