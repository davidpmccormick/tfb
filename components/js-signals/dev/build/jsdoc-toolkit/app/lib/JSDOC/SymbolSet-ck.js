/** @constructor */JSDOC.SymbolSet=function(){this.init()};JSDOC.SymbolSet.prototype.init=function(){this._index=new Hash};JSDOC.SymbolSet.prototype.keys=function(){return this._index.keys()};JSDOC.SymbolSet.prototype.hasSymbol=function(e){return this._index.hasKey(e)};JSDOC.SymbolSet.prototype.addSymbol=function(e){if(JSDOC.opt.a&&this.hasSymbol(e.alias)){LOG.warn("Overwriting symbol documentation for: "+e.alias+".");this.deleteSymbol(e.alias)}this._index.set(e.alias,e)};JSDOC.SymbolSet.prototype.getSymbol=function(e){if(this.hasSymbol(e))return this._index.get(e)};JSDOC.SymbolSet.prototype.getSymbolByName=function(e){for(var t=this._index.first();t;t=this._index.next()){var n=t.value;if(n.name==e)return n}};JSDOC.SymbolSet.prototype.toArray=function(){return this._index.values()};JSDOC.SymbolSet.prototype.deleteSymbol=function(e){if(!this.hasSymbol(e))return;this._index.drop(e)};JSDOC.SymbolSet.prototype.renameSymbol=function(e,t){this._index.replace(e,t);this._index.get(t).alias=t;return t};JSDOC.SymbolSet.prototype.relate=function(){this.resolveBorrows();this.resolveMemberOf();this.resolveAugments()};JSDOC.SymbolSet.prototype.resolveBorrows=function(){for(var e=this._index.first();e;e=this._index.next()){var t=e.value;if(t.is("FILE")||t.is("GLOBAL"))continue;var n=t.inherits;for(var r=0;r<n.length;r++){if(/#$/.test(n[r].alias)){LOG.warn("Attempted to borrow entire instance of "+n[r].alias+" but that feature is not yet implemented.");return}var i=this.getSymbol(n[r].alias);if(!i){LOG.warn("Can't borrow undocumented "+n[r].alias+".");continue}if(n[r].as==i.alias){var s=i.name.split(/([#.-])/).pop();n[r].as=t.name+RegExp.$1+s;LOG.inform("Assuming borrowed as name is "+n[r].as+" but that feature is experimental.")}var o=n[r].as,u=o;if(!o){LOG.warn("Malformed @borrow, 'as' is required.");continue}if(o.length>t.alias.length&&o.indexOf(t.alias)==0)o=o.replace(i.alias,"");else{var a="";o.charAt(0)!="#"&&(a=".");u=i.alias+a+o}o=o.replace(/^[#.]/,"");if(this.hasSymbol(u))continue;var f=i.clone();f.name=o;f.alias=u;this.addSymbol(f)}}};JSDOC.SymbolSet.prototype.resolveMemberOf=function(){for(var e=this._index.first();e;e=this._index.next()){var t=e.value;if(t.is("FILE")||t.is("GLOBAL"))continue;if(t.memberOf)if(t.alias.indexOf(t.memberOf)==0){var n=new RegExp("^("+t.memberOf+")[.#-]?(.+)$"),r=t.alias.match(n);if(r){t.memberOf=r[1];t.name=r[2]}var i=t.name.match(n);i&&(t.name=i[2])}else{var s=t.memberOf.charAt(t.memberOf.length-1);/[.#-]/.test(s)||(t.memberOf+=".");this.renameSymbol(t.alias,t.memberOf+t.name)}else{var o=t.alias.match(/^(.*[.#-])([^.#-]+)$/);if(o){t.memberOf=o[1];t.name=o[2]}}if(t.memberOf)switch(t.memberOf.charAt(t.memberOf.length-1)){case"#":t.isStatic=!1;t.isInner=!1;break;case".":t.isStatic=!0;t.isInner=!1;break;case"-":t.isStatic=!1;t.isInner=!0;break;default:t.isStatic=!0}!t.is("CONSTRUCTOR")&&!t.isNamespace&&t.memberOf==""&&(t.memberOf="_global_");t.memberOf.match(/[.#-]$/)&&(t.memberOf=t.memberOf.substr(0,t.memberOf.length-1));if(t.memberOf){var u=this.getSymbol(t.memberOf);u||(JSDOC.Lang.isBuiltin(t.memberOf)?u=JSDOC.Parser.addBuiltin(t.memberOf):LOG.warn("Trying to document "+t.name+" as a member of undocumented symbol "+t.memberOf+"."));u&&u.addMember(t)}}};JSDOC.SymbolSet.prototype.resolveAugments=function(){for(var e=this._index.first();e;e=this._index.next()){var t=e.value;if(t.alias=="_global_"||t.is("FILE"))continue;JSDOC.SymbolSet.prototype.walk.apply(this,[t])}};JSDOC.SymbolSet.prototype.walk=function(e){var t=e.augments;for(var n=0;n<t.length;n++){var r=this.getSymbol(t[n]);if(!r&&JSDOC.Lang.isBuiltin(""+t[n])){r=new JSDOC.Symbol("_global_."+t[n],[],t[n],new JSDOC.DocComment("Built in."));r.isNamespace=!0;r.srcFile="";r.isPrivate=!1;JSDOC.Parser.addSymbol(r)}if(r){r.augments.length&&JSDOC.SymbolSet.prototype.walk.apply(this,[r]);e.inheritsFrom.push(r.alias);var i=r.methods,s=r.properties;for(var o=0,u=i.length;o<u;o++)i[o].isStatic||e.inherit(i[o]);for(var o=0,u=s.length;o<u;o++)s[o].isStatic||e.inherit(s[o])}else LOG.warn("Can't augment contributer: "+t[n]+", not found.")}};