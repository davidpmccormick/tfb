/**
 * @fileOverview
 * A bootstrap script that creates some basic required objects
 * for loading other scripts.
 * @author Michael Mathews, micmath@gmail.com
 * @version $Id: run.js 756 2009-01-07 21:32:58Z micmath $
 *//**
 * @namespace Keep track of any messages from the running script.
 */function FilePath(e,t){this.slash=t||"/";this.root=this.slash;this.path=[];this.file="";var n=e.split(/[\\\/]/);if(n){n.length&&(this.root=n.shift()+this.slash);n.length&&(this.file=n.pop());n.length&&(this.path=n)}this.path=this.resolvePath()}LOG={warn:function(e,t){if(JSDOC.opt.q)return;t&&(e=t.fileName+", line "+t.lineNumber+": "+e);e=">> WARNING: "+e;LOG.warnings.push(e);LOG.out?LOG.out.write(e+"\n"):print(e)},inform:function(e){if(JSDOC.opt.q)return;e=" > "+e;LOG.out?LOG.out.write(e+"\n"):typeof LOG.verbose!="undefined"&&LOG.verbose&&print(e)}};LOG.warnings=[];LOG.verbose=!1;LOG.out=undefined;FilePath.prototype.resolvePath=function(){var e=[];for(var t=0;t<this.path.length;t++)this.path[t]==".."?e.pop():this.path[t]!="."&&e.push(this.path[t]);return e};FilePath.prototype.toDir=function(){this.file&&(this.file="");return this};FilePath.prototype.upDir=function(){this.toDir();this.path.length&&this.path.pop();return this};FilePath.prototype.toString=function(){return this.root+this.path.join(this.slash)+(this.path.length>0?this.slash:"")+this.file};FilePath.fileName=function(e){var t=Math.max(e.lastIndexOf("/")+1,e.lastIndexOf("\\")+1,0);return e.substring(t)};FilePath.fileExtension=function(e){return e.split(".").pop().toLowerCase()};FilePath.dir=function(e){var t=Math.max(e.lastIndexOf("/")+1,e.lastIndexOf("\\")+1,0);return e.substring(0,t-1)};importClass(java.lang.System);SYS={os:[new String(System.getProperty("os.arch")),new String(System.getProperty("os.name")),new String(System.getProperty("os.version"))].join(", "),slash:System.getProperty("file.separator")||"/",userDir:new String(System.getProperty("user.dir")),javaHome:new String(System.getProperty("java.home")),pwd:undefined};if(arguments[arguments.length-1].match(/^-j=(.+)/)){RegExp.$1.charAt(0)==SYS.slash||RegExp.$1.charAt(1)==":"?SYS.pwd=(new FilePath(RegExp.$1)).toDir().toString():SYS.pwd=(new FilePath(SYS.userDir+SYS.slash+RegExp.$1)).toDir().toString();arguments.pop()}else{print("The run.js script requires you use jsrun.jar.");quit()}var File=Packages.java.io.File;IO={saveFile:function(e,t,n){var r=new Packages.java.io.PrintWriter(new Packages.java.io.OutputStreamWriter(new Packages.java.io.FileOutputStream(e+SYS.slash+t),IO.encoding));r.write(n);r.flush();r.close()},readFile:function(e){if(!IO.exists(e))throw"File doesn't exist there: "+e;return readFile(e,IO.encoding)},copyFile:function(e,t,n){n==null&&(n=FilePath.fileName(e));var e=new File(e),r=new File(t+SYS.slash+n),i=new Packages.java.io.BufferedInputStream(new Packages.java.io.FileInputStream(e),4096),s=new Packages.java.io.BufferedOutputStream(new Packages.java.io.FileOutputStream(r),4096),o;while((o=i.read())!=-1)s.write(o);s.close();i.close()},mkPath:function(e){e.constructor!=Array&&(e=e.split(/[\\\/]/));var t="";for(var n=0,r=e.length;n<r;n++){t+=e[n]+SYS.slash;IO.exists(t)||IO.makeDir(t)}},makeDir:function(e){(new File(e)).mkdir()},ls:function(e,t,n,r){if(r===undefined)var n=[],r=[e];if(r.length==0)return n;t===undefined&&(t=1);e=new File(e);if(!e.directory)return[String(e)];var i=e.list();for(var s=0;s<i.length;s++){var o=String(i[s]);if(o.match(/^\.[^\.\/\\]/))continue;if((new File(r.join(SYS.slash)+SYS.slash+o)).list()){r.push(o);r.length-1<t&&IO.ls(r.join(SYS.slash),t,n,r);r.pop()}else n.push((r.join(SYS.slash)+SYS.slash+o).replace(SYS.slash+SYS.slash,SYS.slash))}return n},exists:function(e){file=new File(e);return file.isDirectory()?!0:file.exists()?file.canRead()?!0:!1:!1},open:function(e,t){var t=!0,n=new File(e),r=new Packages.java.io.PrintWriter(new Packages.java.io.OutputStreamWriter(new Packages.java.io.FileOutputStream(n,t),IO.encoding));return r},setEncoding:function(e){/ISO-8859-([0-9]+)/i.test(e)?IO.encoding="ISO8859_"+RegExp.$1:IO.encoding=e},encoding:"utf-8",include:function(e){load(SYS.pwd+e)},includeDir:function(e){if(!e)return;for(var t=IO.ls(SYS.pwd+e),n=0;n<t.length;n++)/\.js$/i.test(t[n])&&load(t[n])}};IO.include("frame.js");IO.include("main.js");main();